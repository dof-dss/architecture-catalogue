---
defaults: &defaults
  memory: 64M
  instances: ((APP_INSTANCES))
  buildpack: php_buildpack
  services:
  - ea-mysql-service
  env:
    APP_DEBUG: ((APP_DEBUG))
    APP_ENV: ((APP_ENV))
    APP_KEY: ((APP_KEY))
    APP_NAME: ((APP_NAME))
    APP_PHASE: ((APP_PHASE))
    APP_URL: ((APP_URL))
    APP_PAGINATION_PAGE_SIZE: ((APP_PAGINATION_PAGE_SIZE))
    APP_PAGINATION_MAX_PAGES: ((APP_PAGINATION_MAX_PAGES))
    APP_INSTANCES: ((APP_INSTANCES))
    CACHE_DRIVER: file
    DB_CERT_PATH: /etc/ssl/certs
    DB_CONNECTION: mysql
    LOG_CHANNEL: ((LOG_CHANNEL))
    MAIL_DRIVER: ((MAIL_DRIVER))
    MAIL_ENCRYPTION: tls
    MAIL_HOST: ((MAIL_HOST))
    MAIL_PASSWORD: ((MAIL_PASSWORD))
    MAIL_PORT: ((MAIL_PORT))
    MAIL_USERNAME: ((MAIL_USERNAME))
    QUEUE_CONNECTION: sync
    REDIS_SCHEME: tls
    SESSION_DRIVER: ((SESSION_DRIVER))
    SESSION_DOMAIN: ((SESSION_DOMAIN))
    GITHUB_CLIENT_ID: ((GITHUB_CLIENT_ID))
    GITHUB_CLIENT_SECRET: ((GITHUB_CLIENT_SECRET))
    GITHUB_CALLBACK_URL:  ((GITHUB_CALLBACK_URL))
    AZURE_KEY: ((AZURE_KEY))
    AZURE_SECRET: ((AZURE_SECRET))
    AZURE_REDIRECT_URI: ((AZURE_REDIRECT_URI))
    GOVUK_NOTIFY_API_KEY: ((GOVUK_NOTIFY_API_KEY))
    GOVUK_NOTIFY_PASSWORD_RESET_TEMPLATE_ID: ((GOVUK_NOTIFY_PASSWORD_RESET_TEMPLATE_ID))
    GOVUK_NOTIFY_USER_WELCOME_TEMPLATE_ID: ((GOVUK_NOTIFY_USER_WELCOME_TEMPLATE_ID))
    NICS_EA_USAGE_TRACKING_API: ((NICS_EA_USAGE_TRACKING_API))
    NICS_EA_USAGE_TRACKING_TENANT_NAME: ((NICS_EA_USAGE_TRACKING_TENANT_NAME))
    NICS_EA_USAGE_TRACKING_TENANT_ID: ((NICS_EA_USAGE_TRACKING_TENANT_ID))
    NICS_EA_USAGE_TRACKING_ACCOUNT_CREATED_EVENT_ID: ((NICS_EA_USAGE_TRACKING_ACCOUNT_CREATED_EVENT_ID))
    NICS_EA_COGNITO_URL: ((NICS_EA_COGNITO_URL))
    NICS_EA_COGNITO_USER: ((NICS_EA_COGNITO_USER))
    NICS_EA_COGNITO_PASSWORD: ((NICS_EA_COGNITO_PASSWORD))
    NICS_EA_AUDIT_API: ((NICS_EA_AUDIT_API))
    SLACK_WEBHOOK_URL: ((SLACK_WEBHOOK_URL))
    LOG_SLACK_WEBHOOK_URL: ((LOG_SLACK_WEBHOOK_URL))
    ADMIN_USERNAME: ((ADMIN_USERNAME))
    ADMIN_PASSWORD: ((ADMIN_PASSWORD))

applications:
- name: ((APP_NAME))
  <<: *defaults
